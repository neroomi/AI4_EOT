<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TITLE</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"> --> <!-- 4 버전 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css"> <!-- 5 버전 -->

</head>
    <style>
        body{
            background-color : #87cefa;
        }
        .weather{
            color : white;
            text-align : center;
        }
        .CurrIcon, .CurrTemp, .Humidity{
            display : inline-block;
            font-size : 5rem;
            text-align : center;
        }
        .CurrIcon{
            margin-right : 2px;
         }
        .City{
            font-size : 8rem;
            text-align : center;
        }
    .today-clothes{
            font-size : 0.8rem;
            color : white;
            text-align : center;
        }
    </style>
<body>
    <h1>옷추천 서비스</h1>

    <h2>지역을 선택하세요</h2>
        <select id=region name=region>
            <option value="선택">city</option>
            <option value="Seoul">서울</option>
            <option value="Busan">부산</option>
            <option value="Jinju">진주</option>
        </select>

    <h2><div class = 'weather'>
        <div class = 'CurrIcon'></div>
        <div class = 'CurrTemp'></div>
        <div class = 'City'></div>
        <div class = 'Humidity'></div>
    </h2></div>

    <h2>오늘의 추천의상은 ?</h2>
        <div class = 'today-clothes'></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

    <script>

        $(document).ready(function() {

            $("#region").on("change", function(){
                console.log("change - success");
                console.log($("#region"));
                console.log($("#region").val());
                loadWeather($("#region").val());
            });

            function loadWeather (region) {
                console.log(region);
                $.ajax({
                url : `http://api.openweathermap.org/data/2.5/weather?q=${region}&appid=89f01b74b3f891c0789c0beb732223bc&units=metric`,
                dataType : 'json',
                type : 'GET',
                success : function(data){
                    var $Icon = (data.weather[0].icon).substr(0,2);
                    var $Temp = Math.floor(data.main.temp) + '°C';
                    var $city = data.name;
                    var $Humi = data.main.humidity + "%";
                    console.log(data.main.humidity);
                    console.log(data);
                    console.log($Icon);
                    console.log(weathericon);
                     $('.CurrIcon').empty();
                     $('.CurrTemp').empty();
                     $('.City').empty();
                     $('.Humidity').empty();
                     $('.CurrIcon').append('<i class="' + weathericon[$Icon] +'"></i>');
                     $('.CurrTemp').prepend($Temp);
                     $('.City').append($city);
                     $('.Humidity').prepend($Humi);
                     selectClothes(data);
                    }
                });
            }

            let weathericon = {
                '01' : 'fas fa-sun',
                '02' : 'fas fa-cloud-sun',
                '03' : 'fas fa-cloud',
                '04' : 'fas fa-cloud-meatball',
                '09' : 'fas fa-cloud-sun-rain',
                '10' : 'fas fa-cloud-showers-heavy',
                '11' : 'fas fa-poo-storm',
                '13' : 'fas fa-snowflake',
                '50' : 'fas fa-smog',
            };

            function selectClothes(data) {
                let clothes = document.querySelector('.today-clothes');
                let currentTemp = data.main.temp;
                console.log(data.main.temp);
                let winter = currentTemp <= 4;
                let earlyWinter = currentTemp >=5 && currentTemp < 9;
                let beginWinter = currentTemp >= 9 && currentTemp < 12;
                let fall = currentTemp >= 12 && currentTemp < 17;
                let earlyFall = currentTemp >= 17 && currentTemp < 20;
                let earlySummer = currentTemp >= 20 && currentTemp < 23;
                let beginSummer = currentTemp >= 23 && currentTemp < 28;
                let summer = currentTemp >= 28;

                if(winter) {
                    clothes.innerHTML=`
                    <li><h1>패딩, 두꺼운 코트, 누빔 옷, 기모, 목도리</h1></li>
                    <img src="https://image.msscdn.net/images/goods_img/20200715/1515902/1515902_2_500.jpg" alt="패딩" width="200" height="200" >
                    <img src="https://image.msscdn.net/images/goods_img/20200917/1609490/1609490_1_500.jpg" alt="두꺼운 코트" width="200" height="200" >
                    <img src="https://image.msscdn.net/images/goods_img/20201026/1663477/1663477_1_500.jpg" alt="목도리" width="200" height="200" >
                    `;
                } else if(earlyWinter) {
                    clothes.textContent = `
                    <li><h1>울코트, 히트텍, 가죽 옷, 기모</h1></li>
                    `;
                } else if(beginWinter) {
                    clothes.textContent = `
                    <li><h1>트렌치 코트, 야상, 점프, 스타킹, 기모바지</h1></li>
                    `;
                } else if(fall) {
                    clothes.textContent = `
                    <li><h1>자켓, 가디건, 청자켓, 니트, 스타킹, 청바지</h1></li>
                    `;
                } else if(earlyFall) {
                    clothes.textContent = `
                    <li><h1>얇은 가디건, 니트, 맨투맨, 후드, 긴바지</h1></li>
                    `;
                } else if(earlySummer) {
                    clothes.textContent = `
                    <li><h1>블라우스, 긴팔 티, 면바지, 슬랙스</h1></li>
                    `;
                } else if(beginSummer) {
                    clothes.textContent = `
                    <li><h1>반팔, 얇은 셔츠, 반바지, 면바지</h1></li>
                    `;
                } else if(summer) {
                clothes.textContent = `
                    <li><h1>민소매, 반팔, 반바지, 짧은 치마, 린넨 옷</h1></li>
                    `;
                }
            }
        })

    </script>
</body>
</html>